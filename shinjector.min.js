var shUtility={map:function(t,e){var n=[];for(var r in t)n[r]=e(t[r]);return n},reduce:function(t,e,n){var r=n;for(var i in t)r=e(r,t[i]);return r},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},forEach:function(t,e){for(var n in t)e(t[n],n)}},SH_LOGGER_LEVELS={info:1,debug:2,error:4,log:8},shLogger=function(t){this.level=shUtility.reduce(shUtility.map(t.split(/ /),function(t){return SH_LOGGER_LEVELS[t]}),function(t,e){return t|e},0)};shLogger.prototype={log:function(t,e){var n=e.join("");SH_LOGGER_LEVELS[t]&this.level&&console[t](n)},debug:function(){this.log("debug",Array.prototype.slice.call(arguments,0))},info:function(){this.log("info",Array.prototype.slice.call(arguments,0))},error:function(){this.log("log",Array.prototype.slice.call(arguments,0))}};var shInjector=function(t,e){this.injectables={},this.components={},this.logger=e||new shLogger("info"),this.injectables.logger=this.logger,this.strict=t||!1,this.stack=[]};shInjector.prototype={register:function(t,e){var n=shUtility.isString(t)?t:t.name?t.name:shUtility.isFunction(e)&&e.name?e.name:shUtility.isArray(t)?t[t.length-1].name:null,r=e||t;if(this.logger.info("Component name: "+n),this.logger.debug("Component generator: "+r),!shUtility.isString(n))throw this.logger.error("Component has no name",n),new Error("Component has no name");if(!r)throw this.logger.error("No injectable provided"),new Error("No injectable provided");return shUtility.isFunction(r)||shUtility.isArray(r)?this.components[n]=r:this.injectables[t]=r,this},get:function(t){var e;if(-1!=(e=this.stack.indexOf(t))){var n=this.stack.slice(e).join(" -> ");throw this.logger.error("Circular dependency "+n+" -> "+t),new Error("Circular dependency "+n+" -> "+t)}if(this.stack.push(t),this.injectables[t])return this.stack.pop(),this.injectables[t];if(this.components[t]){var r=this.getDependencies(this.components[t],t),i=this.components[t],o=shUtility.isArray(i)?i[i.length-1]:i;return this.stack.pop(),this.injectables[t]=o.apply(this,r)}throw this.logger.error("Component `"+t+"` is not registered."),new Error("Component `"+t+"` is not registered.")},getDependencies:function(t,e){var n,r,i,o,s=[],c=this,l=[];return shUtility.isArray(t)?(s=t.slice(0,t.length-1),n=t[t.length-1],r=e):(r=e,i=t.toString(),o=i.match(/\(([\S]*?)\)/),s=[],o&&o.length>0&&""!==o[1]&&(s=o[1].split(/,/))),s.length>0&&shUtility.forEach(s,function(t,e){try{l.push(c.get(t))}catch(n){if(c.strict)throw n;c.logger.error("Component `"+r+"` could not be instanitated because one of its dependencies could not be found: "+n.message)}}),l}};