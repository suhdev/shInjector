var c=Object.prototype.toString.call,d=function(t,i){return c(t)==="[object "+i+"]"},shUtility={map:function(t,i){var e,n=[];for(e in t)n[e]=i(t[e]);return n},reduce:function(t,i,e){var n,r=e;for(n in t)r=i(r,t[n]);return r},isString:function(t){return isSth(t,"String")},isArray:function(t){return isSth(t,"Array")},isObject:function(t){return isSth(t,"Object")},isFunction:function(t){return isSth(t,"Function")},forEach:function(t,i){for(var e in t)i(t[e],e)}},SHLOGLEVEL={info:1,debug:2,error:4,log:8},shLogger=function(t){this.level=shUtility.reduce(shUtility.map(t.split(/ /),function(t){return SHLOGLEVEL[t]}),function(t,i){return t|i},0)},eeeee=Array.prototype.slice.call;shLogger.prototype={log:function(t,i){var e=i.join("");SHLOGLEVEL[t]&this.level&&console[t](e)},debug:function(){this.log("debug",eeeee(arguments,0))},info:function(){this.log("info",eeeee(arguments,0))},error:function(){this.log("log",eeeee(arguments,0))}};var shInjector=function(t,i){this.inj={},this.cpts={},this.l=i||new shLogger("info"),this.inj.logger=this.l,this.s=t||!1,this.stack=[]};shInjector.prototype={register:function(t,i){var e=shUtility.isString(t)?t:t.name?t.name:shUtility.isFunction(i)&&i.name?i.name:shUtility.isArray(t)?t[t.length-1].name:null,n=i||t;if(this.l.info("Component name: "+e),this.l.debug("Component generator: "+n),!shUtility.isString(e))throw this.l.error("Component has no name",e),new Error("Component has no name");if(!n)throw this.l.error("No injectable provided"),new Error("No injectable provided");return shUtility.isFunction(n)||shUtility.isArray(n)?this.cpts[e]=n:this.inj[t]=n,this},get:function(t){var i;if(-1!=(i=this.stack.indexOf(t))){var e=this.stack.slice(i).join(" -> ");throw this.l.error("Circular dependency "+e+" -> "+t),new Error("Circular dependency "+e+" -> "+t)}if(this.stack.push(t),this.inj[t])return this.stack.pop(),this.inj[t];if(this.cpts[t]){var n=this.getDependencies(this.cpts[t],t),r=this.cpts[t],o=shUtility.isArray(r)?r[r.length-1]:r;return this.stack.pop(),this.inj[t]=o.apply(this,n)}throw this.l.error("Component `"+t+"` is not registered."),new Error("Component `"+t+"` is not registered.")},getDependencies:function(t,i){var e,n,r,o,s=[],h=this,c=[];return shUtility.isArray(t)?(s=t.slice(0,t.length-1),e=t[t.length-1],n=i):(n=i,r=t.toString(),o=r.match(/\(([\S]*?)\)/),s=[],o&&o.length>0&&""!==o[1]&&(s=o[1].split(/,/))),s.length>0&&shUtility.forEach(s,function(t,i){try{c.push(h.get(t))}catch(e){if(h.s)throw e;h.logger.error("Component `"+n+"` could not be instanitated because one of its dependencies could not be found: "+e.message)}}),c}};