var c=Object.prototype.toString,d=function(t,n){return c.call(t)==="[object "+n+"]"},shUtility={map:function(t,n){var e,i=[];for(e in t)i[e]=n(t[e]);return i},reduce:function(t,n,e){var i,r=e;for(i in t)r=n(r,t[i]);return r},isString:function(t){return d(t,"String")},isArray:function(t){return d(t,"Array")},isObject:function(t){return d(t,"Object")},isFunction:function(t){return d(t,"Function")},forEach:function(t,n){for(var e in t)n(t[e],e)}},SHLOGLEVEL={info:1,debug:2,error:4,log:8},shLogger=function(t){this.level=shUtility.reduce(shUtility.map(t.split(/ /),function(t){return SHLOGLEVEL[t]}),function(t,n){return t|n},0)},eeeee=Array.prototype.slice;shLogger.prototype={log:function(t,n){var e=n.join("");SHLOGLEVEL[t]&this.level&&console[t](e)},debug:function(){this.log("debug",eeeee.call(arguments,0))},info:function(){this.log("info",eeeee.call(arguments,0))},error:function(){this.log("log",eeeee.call(arguments,0))}};var shInjector=function(t,n){this.inj={},this.cpts={},this.l=n||new shLogger("info"),this.inj.logger=this.l,this.s=t||!1,this.stack=[]};shInjector.prototype={register:function(t,n){var e=shUtility.isString(t)?t:t.name?t.name:shUtility.isFunction(n)&&n.name?n.name:shUtility.isArray(t)?t[t.length-1].name:null,i=n||t;if(this.l.info("Component name: "+e),this.l.debug("Component generator: "+i),!shUtility.isString(e))throw this.l.error("Component has no name",e),new Error("Component has no name");if(!i)throw this.l.error("No injectable provided"),new Error("No injectable provided");return shUtility.isFunction(i)||shUtility.isArray(i)?this.cpts[e]=i:this.inj[t]=i,this},get:function(t){var n;if(-1!=(n=this.stack.indexOf(t))){var e=this.stack.slice(n).join(" -> ");throw this.l.error("Circular dependency "+e+" -> "+t),new Error("Circular dependency "+e+" -> "+t)}if(this.stack.push(t),this.inj[t])return this.stack.pop(),this.inj[t];if(this.cpts[t]){var i=this.getDependencies(this.cpts[t],t),r=this.cpts[t],o=shUtility.isArray(r)?r[r.length-1]:r;return this.stack.pop(),this.inj[t]=o.apply(this,i)}throw this.l.error("Component `"+t+"` is not registered."),new Error("Component `"+t+"` is not registered.")},getDependencies:function(t,n){var e,i,r,o,s=[],h=this,c=[];return shUtility.isArray(t)?(s=t.slice(0,t.length-1),e=t[t.length-1],i=n):(i=n,r=t.toString(),o=r.match(/\(([\S]*?)\)/),s=[],o&&o.length>0&&""!==o[1]&&(s=o[1].split(/,/))),s.length>0&&shUtility.forEach(s,function(t,n){try{c.push(h.get(t))}catch(e){if(h.s)throw e;h.l.error("Component `"+i+"` could not be instanitated because one of its dependencies could not be found: "+e.message)}}),c}};